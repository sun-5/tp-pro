{extend name="public:base"/}

{block name='body'}
<div class="row">
    <div class="col-md-8">
        <div class="page-header">
            <h2>发布文章</h2>
        </div>
        <form class="form-horizontal" id="register" method="post" action="{:url('index/index/save')}"
            enctype="multipart/form-data">
            <input type="hidden" name="user_id" value="{$Think.session.user_id}">
            <div class="form-group">
                <label for="title" class="col-sm-2 control-label">标题</label>
                <div class="col-sm-10">
                    <input type="text" name='title' class="form-control" id="title" placeholder="文章标题">
                </div>
            </div>
            <div class="form-group">
                <label for="cate" class="col-sm-2 control-label">分类</label>
                <div class="col-sm-10">
                    <select name="cate_id" id="cate" class="form-control">
                        {volist name='cateList' id='cate'}
                        <option value="{$cate.id}">{$cate.name}</option>
                        {/volist}
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="text1" class="col-sm-2 control-label">内容</label>
                <div id="div1" class="col-sm-10">
                </div>
                 <div class="col-sm-10" style="display:none">
                    <textarea  name="content" id="content"  ></textarea>
                </div>
                <!-- <div class="col-sm-10">
                    <textarea name="content" id="content"  style="width:100%;min-height:250px"></textarea>
                </div> -->
            </div>
            <div class="form-group">
                <label for="title_img" class="col-sm-2 control-label">标题图片</label>
                <div class="col-sm-10">
                    <input type="file" name='title_img' class="form-control" id="title_img" placeholder="标题图片">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary" id='submit'>保存</button>
                </div>
            </div>
        </form>
    </div>




    <script type="text/javascript">
        const E = window.wangEditor
        const editor = new E('#div1')
        const $text1 = $('#content')
        editor.config.onchange = function (html) {
            // 第二步，监控变化，同步更新到 textarea
            $text1.val(html)
        }
        editor.create()

        // 第一步，初始化 textarea 的值
        $text1.val(editor.txt.html())
    </script>

    {/block}